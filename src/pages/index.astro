---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogCard from '../components/blog/BlogCard.astro';
import ProjectCard from '../components/work/ProjectCard.astro';

// Ambil data dari content collections
// Sort berdasarkan tanggal terbaru
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).slice(0, 3); // Ambil 3 terbaru

const projects = (await getCollection('projects')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).slice(0, 2); // Ambil 2 terbaru
---

<BaseLayout title="Home" description="Senior Frontend Engineer & UI Architect building scalable web applications.">
    
    <!-- HERO SECTION -->
    <section class="flex flex-col items-start gap-6 mb-20 animate-fade">
        <div class="px-3 py-1 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs font-semibold uppercase tracking-wide border border-blue-100 dark:border-blue-500/20">
            Available for Projects
        </div>
        
        <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight leading-[1.1] text-zinc-900 dark:text-white">
            Build fast, clean, and <br class="hidden md:block">
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-500 to-indigo-600">scalable software.</span>
        </h1>
        
        <p class="text-lg md:text-xl text-zinc-600 dark:text-zinc-400 max-w-2xl leading-relaxed">
            Senior Frontend Engineer & UI Architect. Membantu bisnis membangun produk digital yang solid dengan Astro, React, dan modern stack.
        </p>

        <div class="flex gap-4 mt-2">
            <a href="/work" class="bg-zinc-900 dark:bg-white text-white dark:text-zinc-950 px-8 py-4 rounded-xl font-bold hover:transform hover:-translate-y-1 transition-all shadow-lg shadow-brand-500/10">
                View Work
            </a>
        </div>
    </section>

    <!-- TECH STACK STRIP -->
    <section class="border-y border-zinc-200 dark:border-zinc-800 py-10 mb-20">
        <div class="flex flex-wrap justify-between md:justify-center md:gap-16 gap-6 grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all duration-500">
             <span class="font-bold text-xl flex items-center gap-2 text-zinc-800 dark:text-zinc-200"><i class="ph-fill ph-rocket text-orange-500"></i> Astro</span>
             <span class="font-bold text-xl flex items-center gap-2 text-zinc-800 dark:text-zinc-200"><i class="ph-fill ph-atom text-cyan-500"></i> React</span>
             <span class="font-bold text-xl flex items-center gap-2 text-zinc-800 dark:text-zinc-200"><i class="ph-bold ph-file-ts text-blue-600"></i> TypeScript</span>
             <span class="font-bold text-xl flex items-center gap-2 text-zinc-800 dark:text-zinc-200"><i class="ph-fill ph-paint-brush text-teal-400"></i> Tailwind</span>
        </div>
    </section>

    <!-- SELECTED WORKS -->
    <section class="mb-24">
        <div class="flex justify-between items-end mb-12">
            <div>
                <h2 class="text-3xl font-bold text-zinc-900 dark:text-white mb-2">Selected Works</h2>
                <p class="text-zinc-500 dark:text-zinc-400">Projects that define my engineering approach.</p>
            </div>
            <a href="/work" class="text-brand-600 dark:text-brand-400 font-bold hover:underline hidden md:block">View All Projects</a>
        </div>
        
        <div class="grid gap-12">
            {projects.map((project) => (
                <ProjectCard project={project} />
            ))}
        </div>
        
        <div class="mt-8 md:hidden text-center">
             <a href="/work" class="text-brand-600 dark:text-brand-400 font-bold hover:underline">View All Projects</a>
        </div>
    </section>

    <!-- LATEST WRITING -->
    <section class="mb-20">
        <div class="flex justify-between items-end mb-8">
            <h2 class="text-3xl font-bold text-zinc-900 dark:text-white">Latest Writing</h2>
            <a href="/blog" class="text-brand-600 dark:text-brand-400 font-bold hover:underline">Read Blog</a>
        </div>
        <div class="grid md:grid-cols-3 gap-6">
            {posts.map((post) => (
                <BlogCard post={post} />
            ))}
        </div>
    </section>

</BaseLayout>